package cs22510_2014;

import java.io.FileNotFoundException;
import java.io.PrintWriter;

public class Main {

	public static void main(String[] args) {
		
		String file1 = "/home/evdjoint/gps_1.dat";
		String file2 = "/home/evdjoint/gps_2.dat";

		Controller controller = new Controller(file1, file2);

		controller.synchronizeTimes();
		String line;
		do {
		  line = controller.strm1.read();
		  if(!controller.strm1.satelitesOK) {
			  System.out.println(controller.strm1.currTime.toString());
		  }
		} while (!line.equals("EOF"));
		System.exit(0); 
		
		PrintWriter pw = null;
		try {
			
			
			
			pw = new PrintWriter("data.gpx");
			pw.write("<?xml version=\"1.0\"?>\n"
					+ "<gpx\n"
					+ " version=\"1.0\"\n"
					+ " creator=\"Evdzhan Mustafa\"\n"
					+ " xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n");

			for (GPSReader.Location l : controller.locs) {
				pw.write("<wpt lat=\"" + l.latitude + "\" lon=\"" + l.longitude
						+ "\">\n" + "<time>" + l.date.toString() + "</time>"
						+ "\n</wpt>\n");
			}

			pw.write("</gpx>");

		} catch (FileNotFoundException e) {

			e.printStackTrace();
		}
		pw.close();

	}

}
